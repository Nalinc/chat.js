(function(){"use strict";function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function b(a){setTimeout(function(){var b=a.querySelector(".message-wrapper:last-child").querySelector(".text-wrapper");b.className+=" animated fadeIn "},150)}function c(a){a.scrollTop=a.scrollHeight}function d(a){var b=a.value;x.self.send(b),a.value="",a.focus()}function e(a){q=a,t=r-q.offsetLeft,u=s-q.offsetTop}function f(a){r=document.all?parseInt(a.clientX):parseInt(a.pageX),s=document.all?parseInt(a.clientY):parseInt(a.pageY),null!==q&&r<window.innerWidth-40&&r>40&&s<window.innerHeight-40&&s>40&&(q.style.left=r-t+"px",q.style.top=s-u+"px")}function g(){q=null}var h,i,j,k,l,m,n,o,p;h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=function(){function b(){a(this,b),this.messageWrapper="message-wrapper",this.circleWrapper="circle-wrapper",this.textWrapper="text-wrapper",this.meClass="me",this.themClass="them"}return h(b,[{key:"_build",value:function(a,b){var c=document.createElement("div");c.className="notification"==b?b:this.messageWrapper+" "+b;var d=document.createElement("div");d.className=this.circleWrapper+" animated bounceIn";var e=document.createElement("div");return e.className=this.textWrapper,e.innerHTML=a,c.appendChild(d),c.appendChild(e),c}},{key:"me",value:function(a){return this._build(a,"me")}},{key:"them",value:function(a){return this._build(a,"them")}},{key:"notification",value:function(a){return this._build(a,"notification")}}]),b}(),i=function(){function e(){function f(){setTimeout(function(){p=io.connect(n+"/"+window.location.hostname),p.on("messageIn",h)},1e3)}function g(a){x.self.notify("Anonymous has left")}function h(a){a.source!=o.id&&x.self.recieve(a.text)}a(this,e);var i=document.getElementById("input"),k=document.getElementById("send"),l=document.getElementById("content"),m=document.getElementById("inner"),q=(document.getElementById("chatjsicon"),document.getElementById("nav")),r=document.getElementById("menudots"),s=document.getElementById("minified-wrapper").querySelector("#chatjsicon"),t=function(){window.oldOffsetLeft=document.getElementById("minified-wrapper").offsetLeft,window.oldOffsetTop=document.getElementById("minified-wrapper").offsetTop;var a=document.getElementById("wrapper");a.style.left=window.oldOffsetLeft+"px",a.style.top=window.oldOffsetTop+"px",window.oldOffsetLeft>window.innerWidth-320&&(a.style.left=window.innerWidth-180+"px"),window.oldOffsetLeft<160&&(a.style.left="180px"),window.oldOffsetTop>window.innerHeight-520&&(a.style.top=window.innerHeight-540+"px"),window.oldOffsetTop<60&&(a.style.top="40px"),chatMessenger.collapseToggle()},u=new j;this.messageList=[],this.deletedList=[],this.me=1,this.them=5,this.onRecieve=function(a){return l.appendChild(u.them(a.text)),b(l),c(m),console.log("Recieved: "+a.text)},this.onSend=function(a){return l.appendChild(u.me(a.text)),b(l),c(m),o.emit("messageOut",{text:a.text,nsp:"/"+window.location.hostname}),console.log("Sent: "+a.text)},this.onNotify=function(a){l.appendChild(u.notification(a.text)),c(m)},this.onConnect=function(a){n=a,o=io.connect(n),o.emit("namespaceConnect",window.location.hostname),o.on("connect",f),o.on("userLeft",g)},k.addEventListener("click",function(a){d(i)}),q.addEventListener("click",function(a){var b=document.getElementById("minified-wrapper");b.style.left=window.oldOffsetLeft+"px",b.style.top=window.oldOffsetTop+"px",chatMessenger.collapseToggle(),i.focus()}),s.addEventListener("click",function(a){t()}),s.addEventListener("touchend",function(){t()}),r.addEventListener("click",function(a){a.stopPropagation()}),i.addEventListener("keydown",function(a){var b=a.which||a.keyCode;13===b&&(a.preventDefault(),d(i))})}return h(e,[{key:"send",value:function(){var a=arguments.length<=0||void 0===arguments[0]?"":arguments[0];if(a=this.filter(a),this.validate(a)){var b={user:this.me,text:a,time:(new Date).getTime()};this.messageList.push(b),this.onSend(b)}}},{key:"recieve",value:function(){var a=arguments.length<=0||void 0===arguments[0]?"":arguments[0];if(a=this.filter(a),this.validate(a)){var b={user:this.them,text:a,time:(new Date).getTime()};this.messageList.push(b),this.onRecieve(b)}}},{key:"notify",value:function(){var a=arguments.length<=0||void 0===arguments[0]?"":arguments[0];if(a=this.filter(a),this.validate(a)){var b={user:this.me,text:a,time:(new Date).getTime()};this.onNotify(b)}}},{key:"filter",value:function(a){var b=a.replace("bad input","good output");return b}},{key:"validate",value:function(a){return!!a.length}},{key:"connect",value:function(a){io?this.onConnect(a||"//chatjs-server.herokuapp.com"):alert("socket-io not available")}}]),e}(),l=function(){var a=document.createElement("div");a.className="chatjsContainer";var b=document.createElement("div");b.id="minified-wrapper",b.className="minified-wrapper";var c=document.createElement("div");c.id="wrapper",c.className="wrapper",c.setAttribute("data-intro","Collaspable box"),c.setAttribute("data-position","left");var d=document.createElement("nav");d.id="nav",d.className="nav";var e=document.createElement("div");e.id="default-nav",e.className="default-nav";var f=document.createElement("div");f.className="main-nav";var g=document.createElement("div");g.id="nudgeOptions",g.className="nudgeOptions";var h=document.createElement("label");h.htmlFor="menucheckbox";var i=document.createElement("span"),j=document.createElement("div");j.id="menudots",j.className="menuButton",i.appendChild(j),h.appendChild(i),g.appendChild(h),f.appendChild(g);var k=document.createElement("div");k.id="chatjsicon",k.className="chatjsicon chatjsi",b.appendChild(k),e.appendChild(f),d.appendChild(e),c.appendChild(d);var l=document.createElement("div");l.id="inner",l.className="inner";var m=document.createElement("input");m.id="menucheckbox",m.type="checkbox",l.appendChild(m);var n=document.createElement("div");n.id="sidebar",n.className="sidebar";var o=document.createElement("ul");o.id="sidenav",o.className="sidenav";for(var p=["Lobby","About"],q=0;q<p.length;q++){var r=document.createElement("li"),s=document.createElement("a");s.href="#",s.innerHTML="<b>"+p[q]+"</b>",r.appendChild(s),o.appendChild(r)}n.appendChild(o);var t=document.createElement("div");t.id="content",t.className="content",l.appendChild(n),l.appendChild(t),c.appendChild(l);var u=document.createElement("div");u.id="bottom",u.className="bottom";var v=document.createElement("textarea");v.id="input",v.className="input",v.setAttribute("data-intro","Type your text here"),v.setAttribute("data-position","top"),u.appendChild(v);var w=document.createElement("div");w.id="send",w.className="send",w.setAttribute("data-intro","Send your messages from here"),w.setAttribute("data-position","right"),u.appendChild(w),c.appendChild(u),a.appendChild(c),a.appendChild(b),document.getElementsByTagName("body")[0].appendChild(a)},m=function(){var a='.chatjsContainer .minified-wrapper{                                          background-color: #b7170b;                                          width: 60px;                                          height: 60px;                                          position: fixed;                                          bottom: 30px;                                          display:block;                                          left: 48%;                                          cursor: move;                                          border-radius: 50px}.chatjsContainer .bottom .input:focus,.chatjsContainer .bottom .send:focus {                                          outline: 0;}*{ box-sizing: border-box }.chatjsContainer .bottom .send:hover,.chatjsContainer .nav .default-nav .main-nav .options:hover,.chatjsContainer .nav .default-nav .main-nav .toggle:hover{                                          cursor: pointer;}.chatjsContainer .wrapper{                                          height: 520px;                                          width: 320px;                                          background-color: #fff;                                          position: fixed;                                          display:none;                                          bottom: 10px;                                          left: 50%;                                          -ms-transform: translateX(-50%);                                          -moz-transform: translateX(-50%);                                          -webkit-transform: translateX(-50%);                                          transform: translateX(-50%);                                          box-shadow: 0 3px 3px 0 rgba(50, 50, 50, .5);                                          transition: .3s ease}.chatjsContainer .wrapper .inner {                                          height: 390px;                                          overflow:auto;                                          background: #f2f2f2;                                          -ms-overflow-style: none;                                          overflow: -moz-scrollbars-none}.chatjsContainer .minified-wrapper .inner,.chatjsContainer .minified-wrapper .bottom{ display:none}.chatjsContainer .nav .default-nav,.chatjsContainer .nav .default-nav .main-nav {                                          left: 0;                                          width: 100%;height: 64px;                                          transition: .3s ease;                                          top: 0}.chatjsContainer .wrapper .inner .content {                                          padding: 10.66666667px;                                          position: relative;                                          margin-bottom: 50px}.chatjsContainer .nav {                                          position: relative;                                          top: 0;                                          left: 0;                                          right: 0;                                          cursor:pointer;                                          height: 64px;                                          z-index: 100;                                          transition: .3s ease}.chatjsContainer .nav .default-nav {                                          position: absolute;                                          z-index: 110;                                          background-color: #b7170b;                                          border-bottom: 3px solid #b7170b;                                          color: #fff;                                          -webkit-box-shadow: 0 3px 3px 0 rgba(50, 50, 50, .1);                                          -moz-box-shadow: 0 3px 3px 0 rgba(50, 50, 50, .1);                                          box-shadow: 0 3px 3px 0 rgba(50, 50, 50, .1)}.chatjsContainer .nav .default-nav .main-nav {                                          position: absolute;                                          margin: 0;                                          padding: 0;                                          list-style: none}.chatjsContainer .menuButton {                                          position: relative;                                          display: inline-block;                                          cursor: pointer;                                          border: 2px solid #fff;                                          border-radius: 2px;                                          height: 40px;                                          width: 40px;                                          top:15px;                                          left:15px;}.chatjsContainer #menudots:before {                                          position: absolute;                                          content:"";                                          border-top: 6px solid #fff;                                           border-bottom: 17px double #fff;                                          height: 5px;                                          width:30px;                                          top: 4px;                                          right:3px;}.chatjsContainer #menudots:after {                                          position: absolute;                                          content:"";                                          border-left: 6px solid #b7170b;                                          border-right: 6px solid #b7170b;                                          height: 28px;                                          width:6px;                                          top: 4px;                                          left:9px;}.chatjsContainer #menucheckbox { display: none; }.chatjsContainer .sidenav {                                          width: 150px;                                          z-index:10;                                          padding: 70px 0 0 10px;                                          position: absolute;                                          left: 0;                                          top: 0;                                          bottom: 0;}.chatjsContainer .sidenav li {                                          display: none;                                          list-style-type: none;                                          transition: all .5s;                                          padding-left:20px;}.chatjsContainer #menucheckbox:checked ~ .sidebar .sidenav li:hover { background: #ff5722; }.chatjsContainer #menucheckbox:checked ~ .content {                                          -ms-transform: translateX(150px);                                          -moz-transform: translateX(150px);                                          -webkit-transform: translateX(150px);                                          transform: translateX(150px);}.chatjsContainer .sidenav a { color: white; text-decoration: none; }.chatjsContainer .sidenav b {                                          font: bold 12px/48px Roboto;                                          display: block;                                          opacity: 0;                                          transform: translateX(50px);                                          transition: all 0.4s;}.chatjsContainer #menucheckbox:checked + .sidebar .sidenav{                                          background-color: #b7170b;}.chatjsContainer #menucheckbox:checked + .sidebar .sidenav li {                                          display: block;}.chatjsContainer #menucheckbox:checked ~ .sidebar .sidenav b { opacity: 1; transform: translateX(0); }.chatjsContainer .chatjsicon {                                          position: absolute;                                          width: 25px;                                          height: 20px;                                          border-radius: 50%;                                          background: #ECECEC;                                          cursor:pointer;                                          border: 1px solid rgba(0,0,0,0.1);                                          box-shadow:                                            inset 0 5px 0 rgba(255,255,255,0.3),                                            inset 0 -5px 0 rgba(180,180,180,0.1),                                            0 0 10px rgba(0,0,0,0.1),                                            0 3px 3px rgba(0,0,0,0.2);}.chatjsContainer .chatjsicon:after {                                          content: "";                                          width: 4px;                                          height: 10px;                                          border: 1px solid rgba(0,0,0,0.1);                                          border-top: none;                                          border-left: none;                                          display: block;                                          position: absolute;                                          bottom: -4px;                                          left: 60%;                                          background: #E9E9E9;                                          box-shadow: 0 5px 2px rgba(0,0,0,0.2);                                          transform: skewY(35deg);                                          -ms-transform: skewY(35deg);                                          -moz-transform: skewY(35deg);                                          -webkit-transform: skewY(35deg);}.chatjsContainer .chatjsi {                                          background: #EFEFEF;                                          left: 17px;                                          top: 19px;}.chatjsContainer .bottom,.chatjsContainer .bottom .input {                                          height: 64px;                                          background: #fff;                                          left: 0}.chatjsContainer .nav .default-nav .main-nav .main-nav-item {                                          float: left;                                          height: 64px;                                          margin-right: 50px;                                          position: relative;                                          line-height: 64px;                                          transition: .3s ease}.chatjsContainer .nav .default-nav .main-nav .main-nav-item .main-nav-item-link {                                          display: block;                                          position: relative;                                          height: 64px;                                          width: 100%;                                          text-align: center;                                          line-height: 64px;                                          text-decoration: none;                                          color: inherit;                                          transition: .3s ease}.chatjsContainer .bottom {                                          position: relative;                                          bottom: 0;                                          left: 0;                                          background-color: rgba(0,0,0,0.2);                                          right: 0;                                          height: 64px;                                          z-index: 100;}.chatjsContainer .bottom .input {                                          border: none;                                          width: 80%;                                          position: absolute;                                          background: transparent;                                          top: 0;                                          padding: 0 5%;                                          resize: none;                                          padding-top: 24px;                                          font-weight: 300;                                          -ms-overflow-style: none;                                          overflow: -moz-scrollbars-none}.chatjsContainer .bottom .send {                                          position: absolute;                                          height: 42.66666667px;                                          width: 42.66666667px;                                          border-radius: 50%;                                          border: 0;                                          background: #b7170b;                                          color: #fff;                                          bottom: 10.66666667px;                                          right: 10.66666667px}.chatjsContainer .bottom .send:before {                                          content: "";                                          background: url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/104946/ic_send_white_48dp.png) center center no-repeat;                                          background-size: 25.6px;                                          position: absolute;                                          top: 0;                                          left: 0;                                          right: 0;                                          bottom: 0}.chatjsContainer .message-wrapper {                                          position: relative;                                          overflow: hidden;                                          width: 100%;                                          margin: 10.66666667px 0;                                          padding: 10.66666667px 0}.chatjsContainer .message-wrapper .circle-wrapper {                                          height: 42.66666667px;                                          width: 42.66666667px;                                          border-radius: 50%}.chatjsContainer .message-wrapper .text-wrapper {                                          padding: 10.66666667px;                                          min-height: 42.66666667px;                                          width: 60%;                                          margin: 0 10.66666667px;                                          box-shadow: 0 1px 0 0 rgba(50, 50, 50, .3);                                          border-radius: 2px;                                          font-weight: 300;                                          position: relative;                                          opacity: 0}.chatjsContainer .notification {text-align:center}.chatjsContainer .message-wrapper .text-wrapper:before {                                          content: "";                                          width: 0;                                          height: 0;                                          border-style: solid}.chatjsContainer .message-wrapper.them .circle-wrapper,.chatjsContainer .message-wrapper.them .text-wrapper {                                          background: #b7170b;                                          float: left;                                          color: #fff}.chatjsContainer .message-wrapper.them .text-wrapper:before {                                          border-width: 0 10px 10px 0;                                          border-color: transparent #b7170b transparent transparent;                                          position: absolute;                                          top: 0;                                          left: -9px}.chatjsContainer .message-wrapper.me .circle-wrapper,.chatjsContainer .message-wrapper.me .text-wrapper {                                          background: #ff5722;                                          float: right;                                          color: #333}.chatjsContainer .message-wrapper.me .text-wrapper {                                          background: #fff ;                                          word-wrap: break-word;}.chatjsContainer .message-wrapper.them .text-wrapper {                                          background: #b7170b;                                          word-wrap: break-word;}.chatjsContainer .message-wrapper.me .text-wrapper:before {                                          border-width: 10px 10px 0 0;                                          border-color: #fff transparent transparent;                                          position: absolute;                                          top: 0;                                          right: -9px}.chatjsContainer .animated {                                          -webkit-animation-duration: 1s;                                          animation-duration: 1s;                                          -webkit-animation-fill-mode: both;                                          animation-fill-mode: both}.chatjsContainer .fadeIn {                                          -webkit-animation-name: fadeIn;                                          animation-name: fadeIn}@-webkit-keyframes fadeIn {0% {  opacity: 0 } 100% { opacity: 1 }}.chatjsContainer .wrapper .inner::-webkit-scrollbar { width: 0}.chatjsContainer .bottom .input::-webkit-scrollbar { width: 0}@keyframes fadeIn { 0% {  opacity: 0 } 100% {  opacity: 1 }}@media only screen and (min-device-width: 320px) and (max-device-width: 640px){                                      .chatjsContainer .wrapper{                                          width:100%;                                          height:100%;                                          top:0 !important;                                          left:50% !important}                                      .chatjsContainer .nav {width:100%}                                      .chatjsContainer .wrapper .inner, .chatjsContainer .wrapper .sidenav{                                          height:80%;}                                      .chatjsContainer .wrapper .bottom {                                          bottom:70px;}}',b=document.createElement("style");b.type="text/css",b.innerHTML=a,document.getElementsByTagName("head")[0].appendChild(b)};var q=null,r=0,s=0,t=0,u=0;document.onmousemove=f,document.onmouseup=g,document.ontouchend=g,k=function(){l(),m();var a=document.getElementById("minified-wrapper");a.addEventListener("mousedown",function(a){return"chatjsicon"!==a.target.id&&e(a.target),!1},!1);var b=null;return a.addEventListener("touchstart",function(a){return b=a.changedTouches[0],"chatjsicon"!==b.target.id&&e(b.target),!1},!1),a.addEventListener("touchmove",function(a){return b=a.changedTouches[0],"chatjsicon"!==b.target.id&&f(b),!1},!1),x.self=new x.Messenger,x.self};var v=function(a){return"none"!==(a.currentStyle?a.currentStyle.display:getComputedStyle(a,null).display)},w=function(){var a=document.getElementById("wrapper"),b=document.getElementById("minified-wrapper");a.style.display=v(a)?"none":"block",b.style.display=v(b)?"none":"block"},x={_createClass:h,Messenger:i,BuildHTML:j,init:k,self:self,collapseToggle:w};window.chatMessenger=x,"function"==typeof window.define&&window.define.amd&&window.define("chatMessenger",[],function(){return window.chatMessenger})}).call(this);