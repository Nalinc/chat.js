(function(){"use strict";function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function b(a,b){var c=a.querySelector(".message-wrapper:last-child").querySelector(".text-wrapper");c.innerHTML=b}function c(a){setTimeout(function(){var b=a.querySelector(".message-wrapper:last-child").querySelector(".text-wrapper");b.className+=" animated fadeIn "},150)}function d(a){a.scrollTop=a.scrollHeight}function e(a){var b=a.value;window.messenger.send(b),a.value="",a.focus()}function f(a){o=a,r=p-o.offsetLeft,s=q-o.offsetTop}function g(a){p=document.all?parseInt(a.clientX):parseInt(a.pageX),q=document.all?parseInt(a.clientY):parseInt(a.pageY),null!==o&&p<window.innerWidth-40&&p>40&&q<window.innerHeight-40&&q>40&&(o.style.left=p-r+"px",o.style.top=q-s+"px")}function h(){o=null}var i,j,k,l,m,n;i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=function(){function b(){a(this,b),this.messageWrapper="message-wrapper",this.circleWrapper="circle-wrapper",this.textWrapper="text-wrapper",this.meClass="me",this.themClass="them"}return i(b,[{key:"_build",value:function(a,b){var c=document.createElement("div");return c.className=this.messageWrapper+" "+this[b+"Class"],c.innerHTML='<div class="'+this.circleWrapper+' animated bounceIn"></div>\n              <div class="'+this.textWrapper+'">...</div>',c}},{key:"me",value:function(a){return this._build(a,"me")}},{key:"them",value:function(a){return this._build(a,"them")}}]),b}(),j=function(){function f(){a(this,f);var g=document.getElementById("input"),h=document.getElementById("send"),i=document.getElementById("content"),j=document.getElementById("inner"),l=(document.getElementById("chatjsicon"),document.getElementById("nav")),m=document.getElementById("minified-wrapper").querySelector("#chatjsicon"),n=function(){window.oldOffsetLeft=document.getElementById("minified-wrapper").offsetLeft,window.oldOffsetTop=document.getElementById("minified-wrapper").offsetTop;var a=document.getElementById("wrapper");a.style.left=window.oldOffsetLeft+"px",a.style.top=window.oldOffsetTop+"px",window.oldOffsetLeft>window.innerWidth-320&&(a.style.left=window.innerWidth-180+"px"),window.oldOffsetLeft<160&&(a.style.left="180px"),window.oldOffsetTop>window.innerHeight-520&&(a.style.top=window.innerHeight-540+"px"),window.oldOffsetTop<60&&(a.style.top="40px"),chatMessenger.collapseToggle()},o=new k;g.focus(),this.messageList=[],this.deletedList=[],this.me=1,this.them=5,this.onRecieve=function(a){return console.log("recieving: ",a.text),i.appendChild(o.them(a.text)),b(i,a.text),c(i),d(j),console.log("Recieved: "+a.text)},this.onSend=function(a){return console.log("sending: ",a.text),i.appendChild(o.me(a.text)),b(i,a.text),c(i),d(j),console.log("Sent: "+a.text)},this.onDelete=function(a){return console.log("Deleted: "+a.text)},h.addEventListener("click",function(a){e(g)}),l.addEventListener("click",function(a){var b=document.getElementById("minified-wrapper");b.style.left=window.oldOffsetLeft+"px",b.style.top=window.oldOffsetTop+"px",chatMessenger.collapseToggle()}),m.addEventListener("click",function(a){n()}),m.addEventListener("touchend",function(){n()}),g.addEventListener("keydown",function(a){var b=a.which||a.keyCode;13===b&&(a.preventDefault(),e(g))})}return i(f,[{key:"send",value:function(){var a=arguments.length<=0||void 0===arguments[0]?"":arguments[0];if(a=this.filter(a),this.validate(a)){var b={user:this.me,text:a,time:(new Date).getTime()};this.messageList.push(b),this.onSend(b)}}},{key:"recieve",value:function(){var a=arguments.length<=0||void 0===arguments[0]?"":arguments[0];if(a=this.filter(a),this.validate(a)){var b={user:this.them,text:a,time:(new Date).getTime()};this.messageList.push(b),this.onRecieve(b)}}},{key:"delete",value:function(a){a=a||this.messageLength-1;var b=this.messageLength.pop();this.deletedList.push(b),this.onDelete(b)}},{key:"filter",value:function(a){var b=a.replace("bad input","good output");return b}},{key:"validate",value:function(a){return!!a.length}}]),f}(),m=function(){var a=document.createElement("div");a.className="chatjsContainer";var b=document.createElement("div");b.id="minified-wrapper",b.className="minified-wrapper";var c=document.createElement("div");c.id="wrapper",c.className="wrapper",c.setAttribute("data-intro","Collaspable box"),c.setAttribute("data-position","left");var d=document.createElement("nav");d.id="nav",d.className="nav";var e=document.createElement("div");e.id="default-nav",e.className="default-nav";var f=document.createElement("div");f.className="main-nav";var g=document.createElement("div");g.id="nudgeOptions",g.className="",f.appendChild(g);var h=document.createElement("div");h.id="chatjsicon",h.className="chatjsicon chatjsi",b.appendChild(h),e.appendChild(f),d.appendChild(e),c.appendChild(d);var i=document.createElement("div");i.id="inner",i.className="inner";var j=document.createElement("div");j.id="content",j.className="content",i.appendChild(j),c.appendChild(i);var k=document.createElement("div");k.id="bottom",k.className="bottom";var l=document.createElement("textarea");l.id="input",l.className="input",l.setAttribute("data-intro","Type your text here"),l.setAttribute("data-position","top"),k.appendChild(l);var m=document.createElement("div");m.id="send",m.className="send",m.setAttribute("data-intro","Send your messages from here"),m.setAttribute("data-position","right"),k.appendChild(m),c.appendChild(k),a.appendChild(c),a.appendChild(b),document.getElementsByTagName("body")[0].appendChild(a)},n=function(){var a='.chatjsContainer .minified-wrapper{                                          background-color: #b7170b;                                          width: 60px;                                          height: 60px;                                          position: fixed;                                          bottom: 30px;                                          display:block;                                          left: 48%;                                          cursor: move;                                          border-radius: 50px}.chatjsContainer .bottom .input:focus,.chatjsContainer .bottom .send:focus {                                            outline: 0;}*{ box-sizing: border-box }.chatjsContainer .bottom .send:hover,.chatjsContainer .nav .default-nav .main-nav .options:hover,.chatjsContainer .nav .default-nav .main-nav .toggle:hover{                                            cursor: pointer;}.chatjsContainer .wrapper{                                          height: 520px;                                          width: 320px;                                          background-color: #fff;                                          position: fixed;                                          display:none;                                          bottom: 10px;                                          left: 50%;                                          -ms-transform: translateX(-50%);                                          -moz-transform: translateX(-50%);                                          -webkit-transform: translateX(-50%);                                          transform: translateX(-50%);                                          box-shadow: 0 3px 3px 0 rgba(50, 50, 50, .5);                                          transition: .3s ease}.chatjsContainer .wrapper .inner {                                          height: 390px;                                          overflow:auto;                                          background: #f2f2f2;                                          -ms-overflow-style: none;                                          overflow: -moz-scrollbars-none}.chatjsContainer .minified-wrapper .inner,.chatjsContainer .minified-wrapper .bottom{ display:none}.chatjsContainer .nav .default-nav,.chatjsContainer .nav .default-nav .main-nav {                                          left: 0;                                          width: 100%;height: 64px;                                          transition: .3s ease;                                          top: 0}.chatjsContainer .wrapper .inner .content {                                          padding: 10.66666667px;                                          position: relative;                                          margin-bottom: 42px}.chatjsContainer .nav {                                          position: relative;                                          top: 0;                                          left: 0;                                          right: 0;                                          cursor:pointer;                                          height: 64px;                                          z-index: 100;                                          transition: .3s ease}.chatjsContainer .nav .default-nav {                                          position: absolute;                                          z-index: 110;                                          background-color: #b7170b;                                          border-bottom: 3px solid #b7170b;                                          color: #fff;                                          -webkit-box-shadow: 0 3px 3px 0 rgba(50, 50, 50, .1);                                          -moz-box-shadow: 0 3px 3px 0 rgba(50, 50, 50, .1);                                          box-shadow: 0 3px 3px 0 rgba(50, 50, 50, .1)}.chatjsContainer .nav .default-nav .main-nav {                                          position: absolute;                                          margin: 0;                                          padding: 0;                                          list-style: none}.chatjsContainer .chatjsicon {                                        position: absolute;                                        width: 25px;                                        height: 20px;                                        border-radius: 50%;                                        background: #ECECEC;                                        cursor:pointer;                                        border: 1px solid rgba(0,0,0,0.1);                                        box-shadow:                                          inset 0 5px 0 rgba(255,255,255,0.3),                                          inset 0 -5px 0 rgba(180,180,180,0.1),                                          0 0 10px rgba(0,0,0,0.1),                                          0 3px 3px rgba(0,0,0,0.2);}.chatjsContainer .chatjsicon:after {                                        content: "";                                        width: 4px;                                        height: 10px;                                        border: 1px solid rgba(0,0,0,0.1);                                        border-top: none;                                        border-left: none;                                        display: block;                                        position: absolute;                                        bottom: -4px;                                        left: 60%;                                        background: #E9E9E9;                                        box-shadow: 0 5px 2px rgba(0,0,0,0.2);                                        transform: skewY(35deg);                                        -ms-transform: skewY(35deg);                                        -moz-transform: skewY(35deg);                                        -webkit-transform: skewY(35deg);}.chatjsContainer .chatjsi {                                        background: #EFEFEF;                                        left: 17px;                                        top: 19px;}.chatjsContainer .bottom,.chatjsContainer .bottom .input {                                        height: 64px;                                        background: #fff;                                        left: 0}.chatjsContainer .nav .default-nav .main-nav .main-nav-item {                                        float: left;                                        height: 64px;                                        margin-right: 50px;                                        position: relative;                                        line-height: 64px;                                        transition: .3s ease}.chatjsContainer .nav .default-nav .main-nav .main-nav-item .main-nav-item-link {                                        display: block;                                        position: relative;                                        height: 64px;                                        width: 100%;                                        text-align: center;                                        line-height: 64px;                                        text-decoration: none;                                        color: inherit;                                        transition: .3s ease}.chatjsContainer .bottom {                                          position: relative;                                          bottom: 0;                                          left: 0;                                          right: 0;                                          height: 64px;                                          z-index: 100;}.chatjsContainer .bottom .input {                                        border: none;                                        width: 80%;                                        position: absolute;                                        top: 0;                                        padding: 0 5%;                                        resize: none;                                        padding-top: 24px;                                        font-weight: 300;                                        -ms-overflow-style: none;                                        overflow: -moz-scrollbars-none}.chatjsContainer .bottom .send {                                      position: absolute;                                      height: 42.66666667px;                                      width: 42.66666667px;                                      border-radius: 50%;                                      border: 0;                                      background: #b7170b;                                      color: #fff;                                      bottom: 10.66666667px;                                      right: 10.66666667px}.chatjsContainer .bottom .send:before {                                      content: "";                                      background: url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/104946/ic_send_white_48dp.png) center center no-repeat;                                      background-size: 25.6px;                                      position: absolute;                                      top: 0;                                      left: 0;                                      right: 0;                                      bottom: 0}.chatjsContainer .message-wrapper {                                      position: relative;                                      overflow: hidden;                                      width: 100%;                                      margin: 10.66666667px 0;                                      padding: 10.66666667px 0}.chatjsContainer .message-wrapper .circle-wrapper {                                      height: 42.66666667px;                                      width: 42.66666667px;                                      border-radius: 50%}.chatjsContainer .message-wrapper .text-wrapper {                                      padding: 10.66666667px;                                      min-height: 42.66666667px;                                      width: 60%;                                      margin: 0 10.66666667px;                                      box-shadow: 0 1px 0 0 rgba(50, 50, 50, .3);                                      border-radius: 2px;                                      font-weight: 300;                                      position: relative;                                      opacity: 0}.chatjsContainer .message-wrapper .text-wrapper:before {                                      content: "";                                      width: 0;                                      height: 0;                                      border-style: solid}.chatjsContainer .message-wrapper.them .circle-wrapper,.chatjsContainer .message-wrapper.them .text-wrapper {                                      background: #b7170b;                                      float: left;                                      color: #fff}.chatjsContainer .message-wrapper.them .text-wrapper:before {                                      border-width: 0 10px 10px 0;                                      border-color: transparent #b7170b transparent transparent;                                      position: absolute;                                      top: 0;                                      left: -9px}.chatjsContainer .message-wrapper.me .circle-wrapper,.chatjsContainer .message-wrapper.me .text-wrapper {                                      background: #ff5722;                                      float: right;                                      color: #333}.chatjsContainer .message-wrapper.me .text-wrapper {                                      background: #fff ;                                      word-wrap: break-word;}.chatjsContainer .message-wrapper.me .text-wrapper:before {                                      border-width: 10px 10px 0 0;                                      border-color: #fff transparent transparent;                                      position: absolute;                                      top: 0;                                      right: -9px}.chatjsContainer .animated {                                      -webkit-animation-duration: 1s;                                      animation-duration: 1s;                                      -webkit-animation-fill-mode: both;                                      animation-fill-mode: both}.chatjsContainer .fadeIn {                                      -webkit-animation-name: fadeIn;                                      animation-name: fadeIn}@-webkit-keyframes fadeIn {0% {  opacity: 0 } 100% { opacity: 1 }}.chatjsContainer .wrapper .inner::-webkit-scrollbar { width: 0}.chatjsContainer .bottom .input::-webkit-scrollbar { width: 0}@keyframes fadeIn { 0% {  opacity: 0 } 100% {  opacity: 1 }}',b=document.createElement("style");b.type="text/css",b.innerHTML=a,document.getElementsByTagName("head")[0].appendChild(b)};var o=null,p=0,q=0,r=0,s=0;document.onmousemove=g,document.onmouseup=h,document.ontouchend=h,l=function(){m(),n();var a=document.getElementById("minified-wrapper");a.addEventListener("mousedown",function(a){return"chatjsicon"!==a.target.id&&f(a.target),!1},!1);var b=null;return a.addEventListener("touchstart",function(a){return b=a.changedTouches[0],"chatjsicon"!==b.target.id&&f(b.target),!1},!1),a.addEventListener("touchmove",function(a){return b=a.changedTouches[0],"chatjsicon"!==b.target.id&&g(b),!1},!1),window.messenger=new v.Messenger,messenger};var t=function(){var a=document.getElementById("wrapper"),b=document.getElementById("minified-wrapper");a.style.display=u(a)?"none":"block",b.style.display=u(b)?"none":"block"},u=function(a){return"none"!==(a.currentStyle?a.currentStyle.display:getComputedStyle(a,null).display)},v={_createClass:i,Messenger:j,BuildHTML:k,init:l,collapseToggle:t};window.chatMessenger=v,"function"==typeof window.define&&window.define.amd&&window.define("chatMessenger",[],function(){return window.chatMessenger})}).call(this);